<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Forge Data - DataForge</title>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <link rel="stylesheet" href="{{ url_for('static', filename='css/style.css') }}">
    <style>
        /* Success and error message styles */
        .success-message, .error-message {
            padding: 20px;
            border-radius: 8px;
            margin: 20px 0;
            text-align: center;
        }
        
        .success-message {
            background-color: #f0f9f0;
            border: 1px solid #4CAF50;
            color: #2e7d32;
        }
        
        .error-message {
            background-color: #fff6f6;
            border: 1px solid #f44336;
            color: #d32f2f;
        }
        
        .success-icon, .error-icon {
            font-size: 32px;
            margin-bottom: 10px;
            display: inline-block;
        }
        
        .file-info {
            background-color: #f5f5f5;
            border-radius: 5px;
            padding: 15px;
            margin: 20px 0;
            text-align: left;
        }
        
        .download-button {
            display: inline-flex;
            align-items: center;
            background-color: #4CAF50;
            color: white;
            padding: 10px 20px;
            text-decoration: none;
            border-radius: 4px;
            margin-top: 15px;
            transition: background-color 0.3s;
        }
        
        .download-button:hover {
            background-color: #45a049;
        }
        
        .download-icon {
            margin-right: 8px;
        }
        
        .reload-button {
            background-color: #f5f5f5;
            border: 1px solid #ddd;
            padding: 10px 20px;
            border-radius: 4px;
            margin-top: 15px;
            cursor: pointer;
            margin-left: 10px;
        }
        
        .reload-button:hover {
            background-color: #e0e0e0;
        }
        
        .image-preview {
            margin: 20px 0;
        }
        
        .image-preview img {
            max-width: 100%;
            border: 1px solid #ddd;
            border-radius: 4px;
        }
        
        /* Loading animation */
        .loading-container {
            text-align: center;
            padding: 30px;
        }
        
        .loading-animation {
            display: inline-block;
            margin-bottom: 20px;
        }
        
        .forge-animation {
            position: relative;
            width: 100px;
            height: 100px;
        }
        
        .hammer {
            position: absolute;
            top: 0;
            right: 20px;
            width: 40px;
            height: 60px;
            background-color: #555;
            border-radius: 5px;
            transform-origin: bottom right;
            animation: hammerSwing 1.5s infinite;
        }
        
        .anvil {
            position: absolute;
            bottom: 0;
            left: 20px;
            width: 60px;
            height: 30px;
            background-color: #333;
            border-radius: 5px;
        }
        
        .sparks {
            position: absolute;
            bottom: 30px;
            left: 40px;
            width: 8px;
            height: 8px;
            background-color: #ff6700;
            border-radius: 50%;
            box-shadow: 0 0 10px #ff6700;
            opacity: 0;
            animation: sparkle 1.5s infinite;
        }
        
        @keyframes hammerSwing {
            0%, 100% { transform: rotate(-30deg); }
            50% { transform: rotate(30deg); }
        }
        
        @keyframes sparkle {
            0%, 100% { opacity: 0; transform: scale(0.5); }
            50% { opacity: 1; transform: scale(1.5); }
        }
    </style>
</head>
<body>
    <!-- Navigation -->
    <header>
        <div class="navbar">
            <div class="logo">
                <a href="/">Data<span class="forge-text">Forge</span></a>
            </div>
            <ul class="nav-links">
                <li><a href="/" {% if request.path == '/' %}class="active"{% endif %}>Home</a></li>
                <li><a href="/forge" {% if request.path == '/forge' %}class="active"{% endif %}>Forge Data</a></li>
                <li><a href="/documentation" {% if request.path == '/documentation' %}class="active"{% endif %}>Documentation</a></li>
                <li><a href="/about" {% if request.path == '/about' %}class="active"{% endif %}>About</a></li>
            </ul>
        </div>
    </header>

    <!-- Forge Container -->
    <div class="forge-container">
        <div class="container">
            <div class="forge-header">
                <h2>Forge Your Synthetic Data</h2>
                <p>Select a data type and customize parameters to generate high-quality synthetic data for your projects.</p>
            </div>

            <!-- Data Type Selection -->
            <div class="data-types">
                <div class="data-card selected" data-type="tabular">
                    <img src="{{ url_for('static', filename='images/tabular.jpg') }}" alt="Tabular Data" class="data-card-img">
                    <div class="data-card-content">
                        <h3>Tabular Data</h3>
                        <p>Create structured datasets with customizable schemas, distributions, and correlations.</p>
                        <span class="btn-select">Select</span>
                    </div>
                </div>

                <div class="data-card" data-type="image">
                    <img src="{{ url_for('static', filename='images/image.jpg') }}" alt="Image Data" class="data-card-img">
                    <div class="data-card-content">
                        <h3>Image Data</h3>
                        <p>Generate synthetic images with various patterns, shapes, and transformations.</p>
                        <span class="btn-select">Select</span>
                    </div>
                </div>

                <div class="data-card" data-type="text">
                    <img src="{{ url_for('static', filename='images/text.jpg') }}" alt="Text Data" class="data-card-img">
                    <div class="data-card-content">
                        <h3>Text Data</h3>
                        <p>Create text data with customizable content, length, and linguistic properties.</p>
                        <span class="btn-select">Select</span>
                    </div>
                </div>

                <div class="data-card" data-type="timeseries">
                    <img src="{{ url_for('static', filename='images/timeseries.jpg') }}" alt="Time Series Data" class="data-card-img">
                    <div class="data-card-content">
                        <h3>Time Series Data</h3>
                        <p>Generate time series data with trends, seasonality, and noise.</p>
                        <span class="btn-select">Select</span>
                    </div>
                </div>

                <div class="data-card" data-type="audio">
                    <img src="{{ url_for('static', filename='images/audio.jpg') }}" alt="Audio Data" class="data-card-img">
                    <div class="data-card-content">
                        <h3>Audio Data</h3>
                        <p>Create synthetic audio signals with customizable properties.</p>
                        <span class="btn-select">Select</span>
                    </div>
                </div>
            </div>

            <!-- Configuration Section -->
            <div id="configSection" class="mt-4">
                <!-- This section will be dynamically updated with the form -->
            </div>

            <!-- Configuration Sections -->
            <form id="forge-form">
                <!-- Tabular Data Configuration -->
                <div id="tabular-config" class="config-section" style="display: block;">
                    <h3>Tabular Data Configuration</h3>
                    <div class="config-form">
                        <div class="form-group">
                            <label for="rows">Number of Rows</label>
                            <input type="number" id="rows" name="rows" class="form-control" min="1" max="10000" value="1000" required>
                        </div>
                        <div class="form-group">
                            <label for="output-format">Output Format</label>
                            <select id="output-format" name="output_format" class="form-control" required>
                                <option value="csv">CSV</option>
                                <option value="json">JSON</option>
                                <option value="excel">Excel</option>
                                <option value="pkl">Pickle</option>
                            </select>
                        </div>
                        <div class="form-group">
                            <label for="include-header">Include Header</label>
                            <select id="include-header" name="include_header" class="form-control">
                                <option value="true">Yes</option>
                                <option value="false">No</option>
                            </select>
                        </div>
                        <div class="form-group">
                            <label for="schema-type">Schema Type</label>
                            <select id="schema-type" name="schema_type" class="form-control" required>
                                <option value="customer">Customer Data</option>
                                <option value="transaction">Transaction Data</option>
                                <option value="employee">Employee Data</option>
                                <option value="product">Product Data</option>
                                <option value="custom">Custom Schema</option>
                            </select>
                        </div>
                    </div>
                    <div class="form-group" id="custom-schema-container" style="display: none;">
                        <label for="custom-schema">Custom Schema (JSON)</label>
                        <textarea id="custom-schema" name="custom_schema" class="form-control" rows="6" placeholder='{"age": {"type": "int", "min": 18, "max": 90}, "income": {"type": "float", "min": 20000, "max": 200000}}'>
                        </textarea>
                    </div>
                    <button type="button" id="generate-tabular" class="btn btn-primary" onclick="generateTabularData()">Generate Data</button>
                </div>

                <!-- Image Data Configuration -->
                <div id="image-config" class="config-section" style="display: none;">
                    <h3>Image Data Configuration</h3>
                    <div class="config-form">
                        <div class="form-group">
                            <label for="image-type">Image Type</label>
                            <select id="image-type" name="image_type" class="form-control" required>
                                <option value="noise">Noise</option>
                                <option value="pattern">Pattern</option>
                                <option value="gradient">Gradient</option>
                                <option value="geometric">Geometric Shapes</option>
                            </select>
                        </div>
                        <div class="form-group">
                            <label for="width">Width (px)</label>
                            <input type="number" id="width" name="width" class="form-control" min="32" max="1024" value="256" required>
                        </div>
                        <div class="form-group">
                            <label for="height">Height (px)</label>
                            <input type="number" id="height" name="height" class="form-control" min="32" max="1024" value="256" required>
                        </div>
                        <div class="form-group">
                            <label for="num-images">Number of Images</label>
                            <input type="number" id="num-images" name="num_images" class="form-control" min="1" max="100" value="1" required>
                        </div>
                        <div class="form-group">
                            <label for="format">Image Format</label>
                            <select id="format" name="format" class="form-control" required>
                                <option value="png">PNG</option>
                                <option value="jpg">JPG</option>
                                <option value="bmp">BMP</option>
                            </select>
                        </div>
                    </div>
                    <button type="button" id="generate-image" class="btn btn-primary" onclick="generateImageData()">Generate Data</button>
                </div>

                <!-- Text Data Configuration -->
                <div id="text-config" class="config-section" style="display: none;">
                    <h3>Text Data Configuration</h3>
                    <div class="config-form">
                        <div class="form-group">
                            <label for="text-type">Text Type</label>
                            <select id="text-type" name="text_type" class="form-control" required>
                                <option value="paragraph">Paragraph</option>
                                <option value="article">Article</option>
                                <option value="conversation">Conversation</option>
                                <option value="structured">Structured Text</option>
                            </select>
                        </div>
                        <div class="form-group">
                            <label for="length">Length</label>
                            <select id="length" name="length" class="form-control" required>
                                <option value="short">Short</option>
                                <option value="medium" selected>Medium</option>
                                <option value="long">Long</option>
                            </select>
                        </div>
                        <div class="form-group">
                            <label for="language">Language</label>
                            <select id="language" name="language" class="form-control" required>
                                <option value="en">English</option>
                                <option value="es">Spanish</option>
                                <option value="fr">French</option>
                                <option value="de">German</option>
                            </select>
                        </div>
                        <div class="form-group">
                            <label for="include-entities">Include Named Entities</label>
                            <select id="include-entities" name="include_entities" class="form-control">
                                <option value="true">Yes</option>
                                <option value="false">No</option>
                            </select>
                        </div>
                    </div>
                    <button type="button" id="generate-text-data" class="btn btn-primary" onclick="generateTextData()">Generate Data</button>
                </div>

                <!-- Time Series Data Configuration -->
                <div id="timeseries-config" class="config-section" style="display: none;">
                    <h3>Time Series Data Configuration</h3>
                    <div class="config-form">
                        <div class="form-group">
                            <label for="ts-length">Length</label>
                            <input type="number" id="ts-length" name="ts_length" class="form-control" min="10" max="10000" value="365" required>
                        </div>
                        <div class="form-group">
                            <label for="frequency">Frequency</label>
                            <select id="frequency" name="frequency" class="form-control" required>
                                <option value="D">Daily</option>
                                <option value="W">Weekly</option>
                                <option value="M">Monthly</option>
                                <option value="Q">Quarterly</option>
                                <option value="Y">Yearly</option>
                                <option value="H">Hourly</option>
                                <option value="T">Minute</option>
                                <option value="S">Second</option>
                            </select>
                        </div>
                        <div class="form-group">
                            <label for="components">Components</label>
                            <div class="checkbox-group">
                                <div class="checkbox-item">
                                    <input type="checkbox" id="trend" name="components" value="trend" checked>
                                    <label for="trend">Trend</label>
                                </div>
                                <div class="checkbox-item">
                                    <input type="checkbox" id="seasonality" name="components" value="seasonality" checked>
                                    <label for="seasonality">Seasonality</label>
                                </div>
                                <div class="checkbox-item">
                                    <input type="checkbox" id="noise" name="components" value="noise" checked>
                                    <label for="noise">Noise</label>
                                </div>
                                <div class="checkbox-item">
                                    <input type="checkbox" id="anomalies" name="components" value="anomalies">
                                    <label for="anomalies">Anomalies</label>
                                </div>
                            </div>
                        </div>
                        <div class="form-group">
                            <label for="num-series">Number of Series</label>
                            <input type="number" id="num-series" name="num_series" class="form-control" min="1" max="10" value="1" required>
                        </div>
                    </div>
                    <button type="button" id="generate-ts-data" class="btn btn-primary" onclick="generateTimeseriesData()">Generate Data</button>
                </div>

                <!-- Audio Data Configuration -->
                <div id="audio-config" class="config-section" style="display: none;">
                    <h3>Audio Data Configuration</h3>
                    <div class="config-form">
                        <div class="form-group">
                            <label for="audio-type">Audio Type</label>
                            <select id="audio-type" name="audio_type" class="form-control" required>
                                <option value="waveform">Basic Waveform</option>
                                <option value="noise">Noise Signal</option>
                                <option value="speech">Speech-like</option>
                                <option value="musical">Musical</option>
                            </select>
                        </div>
                        <div class="form-group">
                            <label for="duration">Duration (seconds)</label>
                            <input type="number" id="duration" name="duration" class="form-control" min="0.1" max="30" step="0.1" value="5" required>
                        </div>
                        <div class="form-group">
                            <label for="sample-rate">Sample Rate (Hz)</label>
                            <select id="sample-rate" name="sample_rate" class="form-control" required>
                                <option value="8000">8000 Hz</option>
                                <option value="16000">16000 Hz</option>
                                <option value="22050">22050 Hz</option>
                                <option value="44100" selected>44100 Hz</option>
                                <option value="48000">48000 Hz</option>
                            </select>
                        </div>
                        <div class="form-group">
                            <label for="file-format">File Format</label>
                            <select id="file-format" name="file_format" class="form-control" required>
                                <option value="wav">WAV</option>
                                <option value="mp3">MP3</option>
                            </select>
                        </div>
                    </div>
                    <button type="button" id="generate-audio-data" class="btn btn-primary" onclick="generateAudioData()">Generate Data</button>
                </div>
            </form>

            <!-- Results Section -->
            <div id="result-section" style="display: none;" class="config-section">
                <!-- This will be populated by JavaScript -->
            </div>
        </div>
    </div>

    <!-- Footer -->
    <footer>
        <div class="container">
            <div class="footer-content">
                <div class="footer-section">
                    <h3>DataForge</h3>
                    <p>A comprehensive synthetic data generation platform for machine learning, testing, and development purposes.</p>
                    <div class="social-links">
                        <a href="#"><i class="fab fa-github"></i></a>
                        <a href="#"><i class="fab fa-twitter"></i></a>
                        <a href="#"><i class="fab fa-linkedin"></i></a>
                    </div>
                </div>
                <div class="footer-section">
                    <h3>Links</h3>
                    <ul class="footer-links">
                        <li><a href="{{ url_for('index') }}">Home</a></li>
                        <li><a href="{{ url_for('forge') }}">Forge Data</a></li>
                        <li><a href="#">Documentation</a></li>
                        <li><a href="#">About</a></li>
                    </ul>
                </div>
                <div class="footer-section">
                    <h3>Contact</h3>
                    <ul class="footer-links">
                        <li><a href="mailto:info@dataforge.com">info@dataforge.com</a></li>
                        <li><a href="#">Support</a></li>
                    </ul>
                </div>
            </div>
            <div class="footer-bottom">
                <p>&copy; 2023 DataForge. All rights reserved.</p>
            </div>
        </div>
    </footer>

    <script src="{{ url_for('static', filename='js/main.js') }}"></script>
    <script>
        // Functions to handle data generation
        function generateTabularData() {
            // Get form data
            const rows = document.getElementById('rows').value;
            const outputFormat = document.getElementById('output-format').value;
            const includeHeader = document.getElementById('include-header').value;
            const schemaType = document.getElementById('schema-type').value;
            let customSchema = null;
            
            if (schemaType === 'custom') {
                const schemaInput = document.getElementById('custom-schema');
                try {
                    customSchema = JSON.parse(schemaInput.value.trim());
                } catch (e) {
                    alert('Invalid JSON in custom schema');
                    return;
                }
            }
            
            // Show generating animation
            document.getElementById('configSection').innerHTML = `
                <div class="loading-container">
                    <div class="loading-animation">
                        <div class="forge-animation">
                            <div class="hammer"></div>
                            <div class="anvil"></div>
                            <div class="sparks"></div>
                        </div>
                    </div>
                    <p>Forging your synthetic data...</p>
                </div>
            `;
            
            // Create request data
            const requestData = {
                data_type: 'tabular',
                num_rows: parseInt(rows, 10),
                format: outputFormat,
                schema: customSchema
            };
            
            // Make AJAX request
            fetch('/api/generate', {
                method: 'POST',
                headers: {
                    'Content-Type': 'application/json'
                },
                body: JSON.stringify(requestData)
            })
            .then(response => response.json())
            .then(data => {
                if (data.success) {
                    // Create success message with download link
                    const rows = data.rows || 0;
                    const columns = data.columns || 0;
                    const format = data.format || 'csv';
                    const filename = data.filename || 'data.csv';
                    
                    document.getElementById('configSection').innerHTML = `
                        <div class="success-message">
                            <div class="success-icon">✓</div>
                            <h3>Data Successfully Forged!</h3>
                            <p>${data.message || 'Your data has been generated successfully!'}</p>
                            <div class="file-info">
                                <p><strong>Rows:</strong> ${rows}</p>
                                <p><strong>Columns:</strong> ${columns}</p>
                                <p><strong>Format:</strong> ${format}</p>
                                <p><strong>Filename:</strong> ${filename}</p>
                            </div>
                            <div class="download-container">
                                <a href="${data.download_url}" class="download-button">
                                    <span class="download-icon">↓</span>
                                    Download File
                                </a>
                            </div>
                            <button onclick="location.reload()" class="reload-button">Create Another</button>
                        </div>
                    `;
                } else {
                    // Error message
                    document.getElementById('configSection').innerHTML = `
                        <div class="error-message">
                            <div class="error-icon">⚠</div>
                            <h3>Error Generating Data</h3>
                            <p>${data.message || 'An error occurred while generating the data.'}</p>
                            <button onclick="location.reload()" class="reload-button">Try Again</button>
                        </div>
                    `;
                }
            })
            .catch(error => {
                console.error('Error:', error);
                document.getElementById('configSection').innerHTML = `
                    <div class="error-message">
                        <div class="error-icon">⚠</div>
                        <h3>Error Generating Data</h3>
                        <p>An error occurred while generating the data. Please try again.</p>
                        <button onclick="location.reload()" class="reload-button">Try Again</button>
                    </div>
                `;
            });
        }
        
        function generateImageData() {
            // Get form data
            const imageType = document.getElementById('image-type').value;
            const width = document.getElementById('width').value;
            const height = document.getElementById('height').value;
            const numImages = document.getElementById('num-images').value;
            const format = document.getElementById('format').value;
            
            // Show generating animation
            document.getElementById('configSection').innerHTML = `
                <div class="loading-container">
                    <div class="loading-animation">
                        <div class="forge-animation">
                            <div class="hammer"></div>
                            <div class="anvil"></div>
                            <div class="sparks"></div>
                        </div>
                    </div>
                    <p>Forging your synthetic data...</p>
                </div>
            `;
            
            // Create request data
            const requestData = {
                data_type: 'image',
                image_type: imageType,
                width: parseInt(width, 10),
                height: parseInt(height, 10),
                num_images: parseInt(numImages, 10),
                format: format,
                color_mode: 'RGB'
            };
            
            // Make AJAX request
            fetch('/api/generate', {
                method: 'POST',
                headers: {
                    'Content-Type': 'application/json'
                },
                body: JSON.stringify(requestData)
            })
            .then(response => response.json())
            .then(data => {
                if (data.success) {
                    // Create success message with download link
                    const width = data.width || 512;
                    const height = data.height || 512;
                    const num_images = data.num_images || 1;
                    const format = data.format || 'png';
                    const filename = data.filename || 'image.png';
                    
                    let imagePreview = '';
                    if (data.view_url) {
                        imagePreview = `
                            <div class="image-preview">
                                <h4>Preview:</h4>
                                <img src="${data.view_url}" alt="Generated image" style="max-width: 100%; max-height: 300px;">
                            </div>
                        `;
                    }
                    
                    document.getElementById('configSection').innerHTML = `
                        <div class="success-message">
                            <div class="success-icon">✓</div>
                            <h3>Data Successfully Forged!</h3>
                            <p>${data.message || 'Your image has been generated successfully!'}</p>
                            <div class="file-info">
                                <p><strong>Width:</strong> ${width}px</p>
                                <p><strong>Height:</strong> ${height}px</p>
                                <p><strong>Images:</strong> ${num_images}</p>
                                <p><strong>Format:</strong> ${format}</p>
                                <p><strong>Filename:</strong> ${filename}</p>
                            </div>
                            ${imagePreview}
                            <div class="download-container">
                                <a href="${data.download_url}" class="download-button">
                                    <span class="download-icon">↓</span>
                                    Download File
                                </a>
                            </div>
                            <button onclick="location.reload()" class="reload-button">Create Another</button>
                        </div>
                    `;
                } else {
                    // Error message
                    document.getElementById('configSection').innerHTML = `
                        <div class="error-message">
                            <div class="error-icon">⚠</div>
                            <h3>Error Generating Data</h3>
                            <p>${data.message || 'An error occurred while generating the data.'}</p>
                            <button onclick="location.reload()" class="reload-button">Try Again</button>
                        </div>
                    `;
                }
            })
            .catch(error => {
                console.error('Error:', error);
                document.getElementById('configSection').innerHTML = `
                    <div class="error-message">
                        <div class="error-icon">⚠</div>
                        <h3>Error Generating Data</h3>
                        <p>An error occurred while generating the data. Please try again.</p>
                        <button onclick="location.reload()" class="reload-button">Try Again</button>
                    </div>
                `;
            });
        }
        
        function generateTextData() {
            // Get form data
            const textType = document.getElementById('text-type').value;
            const length = document.getElementById('length').value;
            const language = document.getElementById('language').value;
            const includeEntities = document.getElementById('include-entities').value;
            
            // Show generating animation
            document.getElementById('configSection').innerHTML = `
                <div class="loading-container">
                    <div class="loading-animation">
                        <div class="forge-animation">
                            <div class="hammer"></div>
                            <div class="anvil"></div>
                            <div class="sparks"></div>
                        </div>
                    </div>
                    <p>Forging your synthetic data...</p>
                </div>
            `;
            
            // Create request data
            const requestData = {
                data_type: 'text',
                text_type: textType,
                length: length,
                language: language,
                include_entities: includeEntities === 'true'
            };
            
            // Make AJAX request
            fetch('/api/generate', {
                method: 'POST',
                headers: {
                    'Content-Type': 'application/json'
                },
                body: JSON.stringify(requestData)
            })
            .then(response => response.json())
            .then(data => {
                if (data.success) {
                    // Create success message with download link
                    const format = data.format || 'txt';
                    const filename = data.filename || 'text.txt';
                    const wordCount = data.word_count || 0;
                    const language = data.language || 'en';
                    
                    let textPreview = '';
                    if (data.preview) {
                        textPreview = `
                            <div class="text-preview">
                                <h4>Preview:</h4>
                                <div class="preview-content">${data.preview}</div>
                            </div>
                        `;
                    }
                    
                    document.getElementById('configSection').innerHTML = `
                        <div class="success-message">
                            <div class="success-icon">✓</div>
                            <h3>Data Successfully Forged!</h3>
                            <p>${data.message || 'Your text has been generated successfully!'}</p>
                            <div class="file-info">
                                <p><strong>Type:</strong> ${textType}</p>
                                <p><strong>Word Count:</strong> ${wordCount}</p>
                                <p><strong>Language:</strong> ${language}</p>
                                <p><strong>Format:</strong> ${format}</p>
                                <p><strong>Filename:</strong> ${filename}</p>
                            </div>
                            ${textPreview}
                            <div class="download-container">
                                <a href="${data.download_url}" class="download-button">
                                    <span class="download-icon">↓</span>
                                    Download File
                                </a>
                            </div>
                            <button onclick="location.reload()" class="reload-button">Create Another</button>
                        </div>
                    `;
                } else {
                    // Error message
                    document.getElementById('configSection').innerHTML = `
                        <div class="error-message">
                            <div class="error-icon">⚠</div>
                            <h3>Error Generating Data</h3>
                            <p>${data.message || 'An error occurred while generating the data.'}</p>
                            <button onclick="location.reload()" class="reload-button">Try Again</button>
                        </div>
                    `;
                }
            })
            .catch(error => {
                console.error('Error:', error);
                document.getElementById('configSection').innerHTML = `
                    <div class="error-message">
                        <div class="error-icon">⚠</div>
                        <h3>Error Generating Data</h3>
                        <p>An error occurred while generating the data. Please try again.</p>
                        <button onclick="location.reload()" class="reload-button">Try Again</button>
                    </div>
                `;
            });
        }
        
        function generateTimeseriesData() {
            // Get form data
            const tsLength = document.getElementById('ts-length').value;
            const frequency = document.getElementById('frequency').value;
            const numSeries = document.getElementById('num-series').value;
            
            // Get selected components
            const componentCheckboxes = document.querySelectorAll('input[name="components"]:checked');
            const components = Array.from(componentCheckboxes).map(cb => cb.value);
            
            // Show generating animation
            document.getElementById('configSection').innerHTML = `
                <div class="loading-container">
                    <div class="loading-animation">
                        <div class="forge-animation">
                            <div class="hammer"></div>
                            <div class="anvil"></div>
                            <div class="sparks"></div>
                        </div>
                    </div>
                    <p>Forging your synthetic data...</p>
                </div>
            `;
            
            // Create request data
            const requestData = {
                data_type: 'timeseries',
                ts_length: parseInt(tsLength, 10),
                frequency: frequency,
                num_series: parseInt(numSeries, 10),
                components: components
            };
            
            // Make AJAX request
            fetch('/api/generate', {
                method: 'POST',
                headers: {
                    'Content-Type': 'application/json'
                },
                body: JSON.stringify(requestData)
            })
            .then(response => response.json())
            .then(data => {
                if (data.success) {
                    // Create success message with download link
                    const format = data.format || 'csv';
                    const filename = data.filename || 'timeseries.csv';
                    const length = data.length || 0;
                    const numSeries = data.num_series || 1;
                    
                    let chartPreview = '';
                    if (data.chart_url) {
                        chartPreview = `
                            <div class="chart-preview">
                                <h4>Preview:</h4>
                                <img src="${data.chart_url}" alt="Time series chart" style="max-width: 100%;">
                            </div>
                        `;
                    }
                    
                    document.getElementById('configSection').innerHTML = `
                        <div class="success-message">
                            <div class="success-icon">✓</div>
                            <h3>Data Successfully Forged!</h3>
                            <p>${data.message || 'Your time series data has been generated successfully!'}</p>
                            <div class="file-info">
                                <p><strong>Length:</strong> ${length} points</p>
                                <p><strong>Frequency:</strong> ${frequency}</p>
                                <p><strong>Series:</strong> ${numSeries}</p>
                                <p><strong>Format:</strong> ${format}</p>
                                <p><strong>Filename:</strong> ${filename}</p>
                            </div>
                            ${chartPreview}
                            <div class="download-container">
                                <a href="${data.download_url}" class="download-button">
                                    <span class="download-icon">↓</span>
                                    Download File
                                </a>
                            </div>
                            <button onclick="location.reload()" class="reload-button">Create Another</button>
                        </div>
                    `;
                } else {
                    // Error message
                    document.getElementById('configSection').innerHTML = `
                        <div class="error-message">
                            <div class="error-icon">⚠</div>
                            <h3>Error Generating Data</h3>
                            <p>${data.message || 'An error occurred while generating the data.'}</p>
                            <button onclick="location.reload()" class="reload-button">Try Again</button>
                        </div>
                    `;
                }
            })
            .catch(error => {
                console.error('Error:', error);
                document.getElementById('configSection').innerHTML = `
                    <div class="error-message">
                        <div class="error-icon">⚠</div>
                        <h3>Error Generating Data</h3>
                        <p>An error occurred while generating the data. Please try again.</p>
                        <button onclick="location.reload()" class="reload-button">Try Again</button>
                    </div>
                `;
            });
        }
        
        function generateAudioData() {
            // Get form data
            const audioType = document.getElementById('audio-type').value;
            const duration = document.getElementById('duration').value;
            const sampleRate = document.getElementById('sample-rate').value;
            const fileFormat = document.getElementById('file-format').value;
            
            // Show generating animation
            document.getElementById('configSection').innerHTML = `
                <div class="loading-container">
                    <div class="loading-animation">
                        <div class="forge-animation">
                            <div class="hammer"></div>
                            <div class="anvil"></div>
                            <div class="sparks"></div>
                        </div>
                    </div>
                    <p>Forging your synthetic data...</p>
                </div>
            `;
            
            // Create request data
            const requestData = {
                data_type: 'audio',
                audio_type: audioType,
                duration: parseFloat(duration),
                sample_rate: parseInt(sampleRate, 10),
                file_format: fileFormat
            };
            
            // Make AJAX request
            fetch('/api/generate', {
                method: 'POST',
                headers: {
                    'Content-Type': 'application/json'
                },
                body: JSON.stringify(requestData)
            })
            .then(response => response.json())
            .then(data => {
                if (data.success) {
                    // Create success message with download link
                    const format = data.format || 'wav';
                    const filename = data.filename || 'audio.wav';
                    const duration = data.duration || 0;
                    const sampleRate = data.sample_rate || 44100;
                    
                    let audioPreview = '';
                    if (data.view_url) {
                        audioPreview = `
                            <div class="audio-preview">
                                <h4>Preview:</h4>
                                <audio controls style="width: 100%;">
                                    <source src="${data.view_url}" type="audio/${format}">
                                    Your browser does not support the audio element.
                                </audio>
                            </div>
                        `;
                    }
                    
                    document.getElementById('configSection').innerHTML = `
                        <div class="success-message">
                            <div class="success-icon">✓</div>
                            <h3>Data Successfully Forged!</h3>
                            <p>${data.message || 'Your audio data has been generated successfully!'}</p>
                            <div class="file-info">
                                <p><strong>Type:</strong> ${audioType}</p>
                                <p><strong>Duration:</strong> ${duration}s</p>
                                <p><strong>Sample Rate:</strong> ${sampleRate}Hz</p>
                                <p><strong>Format:</strong> ${format}</p>
                                <p><strong>Filename:</strong> ${filename}</p>
                            </div>
                            ${audioPreview}
                            <div class="download-container">
                                <a href="${data.download_url}" class="download-button">
                                    <span class="download-icon">↓</span>
                                    Download File
                                </a>
                            </div>
                            <button onclick="location.reload()" class="reload-button">Create Another</button>
                        </div>
                    `;
                } else {
                    // Error message
                    document.getElementById('configSection').innerHTML = `
                        <div class="error-message">
                            <div class="error-icon">⚠</div>
                            <h3>Error Generating Data</h3>
                            <p>${data.message || 'An error occurred while generating the data.'}</p>
                            <button onclick="location.reload()" class="reload-button">Try Again</button>
                        </div>
                    `;
                }
            })
            .catch(error => {
                console.error('Error:', error);
                document.getElementById('configSection').innerHTML = `
                    <div class="error-message">
                        <div class="error-icon">⚠</div>
                        <h3>Error Generating Data</h3>
                        <p>An error occurred while generating the data. Please try again.</p>
                        <button onclick="location.reload()" class="reload-button">Try Again</button>
                    </div>
                `;
            });
        }
    </script>
</body>
</html>